<% 
  const { 
    banner: {
      url: bannerURL,
    },
    title,
    content,
    updatedAt,
  } = locals.currentBlog;

  const compressedBannerURL = bannerURL.replace('upload/', 'upload/w_960,h_420,c_auto/q_auto,f_auto/');
%>

<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../layouts/head', {title: 'Edit Blog | Inktale'}) %>

    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap" rel="stylesheet"/>

    <script src="/js/script.js" defer></script>
    <script src="/js/update_blog.js" type="module"></script>
  </head>
  <body>
    <!-- #TOP APP BAR -->
    <%- include('../partials/top_app_bar') %>

    <!-- #MAIN -->
    <main class="main">
      <article class="page create-blog-page">
        <div class="container">
          <h2 class="page-title text-on-surface headline-small">Edit blog</h2>

          <form class="blog-write-form" data-form="">
            <div class="image-field-wrapper">
              <label for="banner" class="btn filled-tonal">
                <input type="file" id="banner" name="banner" accept="image/*" data-image-field=""
                />
                <span class="material-symbols-rounded leading-icon">cloud_upload</span>

                <span class="label-large">Upload a banner image</span>

                <div class="state-layer"></div>
              </label>

              <p class="text label-large text-on-surface-variant">
                Use a ratio of 16:9 for the best result. <br /> Only JPEG, PNG with max size of 5MB.
              </p>

              <div class="image-preview show" data-image-preview="">
                <img src="<%= compressedBannerURL %>" alt="<%= title %>" class="img-cover"/>

                <div class="state-layer"></div>
              </div>

              <button type="button" class="icon-btn filled-tonal" data-image-preview-clear>
                <span class="material-symbols-rounded">delete</span>
                <div class="state-layer"></div>
              </button>
            </div>

            <input
              type="text"
              name="title"
              aria-label="Blog Title"
              placeholder="Article Title ..."
              class="title-field headline-large"
              required
              value="<%= title %>"
            />

            <textarea
              name="content"
              aria-label="Blog Content"
              placeholder="Write your post content here ..."
              class="textarea body-large"
              required
              data-textarea-auto-height
            >
              <%= content %>
            </textarea>

            <div class="footer-actions">
              <button class="btn btn-fill" data-submit-btn>
                <p class="label-large">Save changes</p>
                <div class="state-layer"></div>
              </button>
            </div>
          </form>
        </div>
      </article>
    </main>

    <!-- SNACKBAR -->
    <div class="snackbar-wrapper" data-snackbar-wrapper></div>

    <!-- #FOOTER -->
    <%- include('../layouts/footer') %>
  </body>
</html>